## 为什么 Vite 比 Webpack 更快？
主要是因为 Vite 采用了 不同的开发模式、充分利用了 浏览器对 ES Modules 的支持、使用了更高效的底层语言 并 优化了热更新机制。

### 开发模式的差异
- 在开发环境中，Webpack 是基于打包器（bundler）的，需要先打包再启动开发服务器，而 Vite 是基于原生 ES 模块的，直接启动服务器，在打包时只打包当前文件，在请求模块时再进行实时编译。 
  
使用 Webpack 时，所有的模块都需要在开发前打包，会增加启动时间和构建时间，而 Vite 会在请求模块时再进行实时编译，这种按需动态编译的模式可以大大减少编译时间。

### Vite 的依赖预构建
- Vite 在启动时会预构建依赖，将依赖转换为 ESM 格式，从而加快模块的加载速度。而 Webpack 则是在打包时处理依赖，会增加打包时间。

### Vite 对原生 ES Modules 的支持
- Vite 利用浏览器的原生 ES 模块支持，无需打包，将开发环境下的模块文件直接作为浏览器要执行的文件。而 Webpack 则需要将模块打包成 CommonJS 或 AMD 格式，增加了打包时间。

### ES Modules
通过使用 export 和 import 语句，ES Modules 允许在浏览器端导入和导出模块。

当使用 ES Modules 进行开发时，实际上是在构建一个 依赖关系图，不同的依赖项之间通过 导入语句 进行关联。

- ES Modules 是 JavaScript 模块的标准，目前主流浏览器（除IE外）均支持 ES Modules，并且可以通过在 script 标签中设置 type="module" 来加载模块。而 Webpack 则需要使用 Babel 或 TypeScript 进行编译。

### Vite 与 Webpack 底层语言的差异
- Webpack 是基于 Node.js 构建的，而 Vite 是基于 esbuild 进行预构建依赖。esbuild 是一个 Go 语言编写的。Go 语言在编译速度和执行效率上，远超 Node.js。

### 预构建依赖
指的是在项目 启动或构建 之前，对项目中所需的依赖项进行预先的 处理或构建。当项目实际运行时，可以直接使用这些已经构建好的依赖，而无需再进行实时的编译或构建，从而提高了项目的启动速度。
预构建依赖 的过程包括以下几个步骤：
1. 扫描项目中的依赖项，并将这些依赖项添加到预构建依赖列表中。
2. 对预构建依赖列表中的依赖项进行预处理，将其转换为 ESM 格式。
3. 将预处理后的依赖项保存到缓存中，以便在后续的构建或启动过程中使用。

## 热更新的处理
- Vite 启动时，会扫描项目中的文件，创建有一个模块依赖图实例，记录项目中各个模块之间的依赖关系，使用文件系统来监控项目文件的变化，当检测到文件修改时，Vite 会计算出来哪些模块受到了有影响，并标记为需要更新的。并通过 WebSocket 协议将模块的更新信息发送给浏览器，浏览器接收到更新信息后，执行相应的更新操作，如替换旧模块、执行新的模块代码等 并更新到页面。
- Webapck 中，当一个模块或其依赖的模块内容改变时，Webpack 会重新编译整个模块，并将新的模块内容发送给浏览器。

## 